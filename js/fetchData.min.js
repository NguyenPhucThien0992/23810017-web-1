async function fetchData(t,e,n){await fetch(`${url}/${t}`).then(t=>t.json()).then(t=>{const a=Handlebars.templates[`${e}.hbs`],o={data:t},s=document.getElementById(n);s.innerHTML=a(o)})}async function fetchBlogPagination(t,e=1,n,a){await fetch(`${url}/${t}?page=${e}`).then(t=>t.json()).then(o=>{const s=Handlebars.templates[`${n}.hbs`];let i={};o.data?(i.data=o.data,i.pageCount=o.pageCount,i.currentPage=e,i.request=t):i={data:o};const r=document.getElementById(a);r.innerHTML=s(i)})}async function fetchBlogDetails(t,e=!1,n){await fetchBlogPagination("blogs/"+t,1,"details-template","blogs"),n(),e&&(window.location.href="#comments")}async function getAuthenticate(t,e){let n=await fetch(`${userUrl}/authenticate`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application.json"},body:JSON.stringify({username:t,password:e})}),a=await n.json();if(200==n.status)return a.token;throw new Error(a.message)}async function sendMail(t,e){let n=await fetch(`${userUrl}/send`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application.json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)}),a=await n.json();if(200==n.status)return a;throw new Error(a.message)}async function verifyToken(t){return await fetch(`${userUrl}/verify`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application.json",Authorization:`Bearer ${t}`},body:JSON.stringify({token:t})})}async function postComment({token:t,...e}){return await fetch(`${userUrl}/comment`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application.json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)})}function login(t){t.preventDefault();let e=document.getElementById("username").value,n=document.getElementById("password").value;getAuthenticate(e,n).then(t=>{localStorage.setItem("token",t),document.getElementsByClassName("btn-close")[0].click(),displayControl()}).catch(t=>{document.getElementById("errorMessage").innerHTML=t,displayControl(!1)})}function displayControl(t=!0){let e=document.getElementsByClassName("linkLogin"),n=document.getElementsByClassName("linkLogout");for(let a=0;a<e.length;a++)e[a].style.display=t?"none":"block",n[a].style.display=t?"block":"none"}async function verify(){try{let t=localStorage.getItem("token");if(t){let e=await verifyToken(t);if(200==e.status)return!0}}catch(t){return!1}return!1}async function checkLogin(){let t=await verify();displayControl(t)}function logout(){localStorage.clear("token"),displayControl(!1)}const url="https://web1-api.vercel.app/api",userUrl="https://web1-api.vercel.app/users";